<html>
<head>
  <meta charset="utf-8">
  <title>cheat</title>
</head>
<style>
#codeArea{
  overflow: hidden;
  float: left;
}

#code {
  width: 300px;
  height: 480px;
}

#run{
  width: auto;
  font-weight: bold;
  text-align: center;
}

#res {
  width: 300px;
  padding: 2px;
  border: 1px solid black;
  float: left;
}

</style>
<body>

<div id="codeArea">
<textarea id="code"></textarea><br>
<input id="run" type="button" value="run">
</div>


<div id="res">
</div>

<script>

document.getElementById("run").addEventListener("click", function(){
  let code = document.getElementById("code").value;
  const reg = [
    [/要素|のもの/g, ""],
    [/行揃え：/g, "text-align:"],
    [/垂直位置：/g, "vertical-align:"],
    [/垂直位置：中央揃え/g, "vertical-align:middle"],
    [/上揃え/g, "top"],
    [/下揃え/g, "bottom"],
    [/中央揃え/g, "center"],
    [/左揃え/g, "left"],
    [/右揃え/g, "right"],
    [/ピクセル/g, "px"],
    [/文字分/g, "em"],
    [/；/g, ";"],
    [/｛/g, "{"],
    [/｝/g, "}"],
    [/左マージン：/g, "margin-left: "],
    [/右マージン：/g, "margin-right: "],
    [/上マージン：/g, "margin-top: "],
    [/下マージン：/g, "margin-bottom: "],
    [/マージン：/g, "margin: "],

    [/文字色：/g, "color: "],
    [/背景色：/g, "background-color: "],

    [/背景画像：/g, "background-image: "],
    [/背景画像の並べ方：/g, "background-repeat: "],
    [/繰り返しなし/g, "no-repeat"],
    [/背景画像の位置：/g, "background-position: "],
    [/幅：/g, "width: "],
    [/高さ：/g, "height: "],

    [/フォントサイズ：/g, "font-size: "],
    [/フォントの種類：/g, "font-family: "],
    [/フォントウェイト：/g, "font-weight: "],
    [/通常体/g, "normal"],
    [/太字/g, "bold"],

    [/字飾り：/g, "text-decoration: "],
    [/なし/g, "none"],
    [/下線/g, "underline"],
    [/上線/g, "overline"],

    [/左ボーダー：/g, "border-left: "],
    [/右ボーダー：/g, "border-right: "],
    [/上ボーダー：/g, "border-top: "],
    [/下ボーダー：/g, "border-bottom: "],
    [/ボーダーの表示形式：/g, "border-collapse: "],
    [/ボーダー：/g, "border: "],
    [/結合/g, "collapse"],
    [/分離/g, "separate"],
    [/実線/g, "solid"],
    [/破線/g, "dashed"],

    [/左パディング：/g, "padding-left: "],
    [/右パディング：/g, "padding-right: "],
    [/パディング：/g, "padding: "],
    [/配置：/g, "position: "],
    [/相対/g, "relative"],
    [/絶対/g, "absolute"],
    [/上からの距離：/g, "top: "],
    [/左からの距離：/g, "left: "],
    [/右からの距離：/g, "right: "],
    [/下からの距離：/g, "bottom: "],
    [/Zインデックス：/g, "z-index: "],
    [/内容があふれる場合の処理：/g, "overflow: "],

    [/回り込み：左/g, "float: left"],
    [/回り込み：右/g, "float: right"],
    [/インデント：/g, "text-indent: "],
    [/行間：/g, "line-height: "],

    [/等幅/g, "monospace"],

    [/生成するボックスの種類：/g, "display: "],
    [/インライン/g, "inline"],
    [/ブロック/g, "block"],

    [/リストの形式：/g, "list-style-type:"],
    [/頭に０を付けた１０進数/g, "decimal-leading-zero"],
    [/なし/g, "none"],
    [/円（白丸）/g, "circle"],
    [/円（黒丸）/g, "disc"],
    [/リスト項目の画像：/g, "list-style-image: "],

    [/の未参照状態/g, ":link"],
    [/の既参照状態/g, ":visited"],
    [/のホバー状態/g, ":hover"],
    [/のアクティブ状態/g, ":active"],


    [/　/g, " "],

    [/の１文字目/g, "::first-letter"],

    [/％/g, "%"],

    [/０/g, "0"],
    [/１/g, "1"],
    [/２/g, "2"],
    [/３/g, "3"],
    [/４/g, "4"],
    [/５/g, "5"],
    [/６/g, "6"],
    [/７/g, "7"],
    [/８/g, "8"],
    [/９/g, "9"],

    [/と/g, ","],
    [/のうちclass属性が/g, "."],
    [/のうちid属性が/g, "#"],


  ];

  for(let i = 0; i < reg.length; i++){
    code = code.replace(reg[i][0], reg[i][1]);
  }
  let codes = code.split('\n');

  for(let i = 0; i < codes.length; i++){
    let ch = codes[i];
    console.log(ch);
    if(ch.match(/^[^a-zA-Z\.#{}()\[\]\"\"\'\' ]/)){
      codes[i] = codes[i].slice(1).trim();
    }
    ch = codes[i];
    if(ch.match(/の中に含まれる/)){
      let chs = ch.split(",");

      codes[i] = "";
      for(let j = 0; j < chs.length; j++){
        let left = chs[j].split(/の中に含まれる/);
        for(let k = 0; j < left.length; k++){
          if(left[k] === undefined) break;
          if(left[k].match(/ＩＤ/)){
            left[k] = "#" + left[k].replace(/ＩＤ/, "").trim();
          }else if(left[k].match(/クラス/)){
            left[k] = "." + left[k].replace(/クラス/, "").trim();
          }

          if((left[k][0] != '.' || left[k][0] != '#')){
            codes[i] += " ";
          }

          codes[i] += left[k] ;
        }
        if(j + 1 != chs.length){
          codes[i] += ",";
        }
      }
    }else {
      if(ch.match(/ＩＤ/)){
        codes[i] = "#" + ch.replace(/ＩＤ/, "").trim();
      }else if(ch.match(/クラス/)){
        codes[i] = "." + ch.replace(/クラス/, "").trim();
      }else if(ch.match(/-image/)){
        let token = ch.split(":");
        let css = token[0];
        let url = token[1].replace(";", "");
        codes[i] = css + ": url(" + url + ");";
      }
    }
  }

  document.getElementById("res").innerHTML = "<pre><code>";
  for(let i = 0; i < codes.length; i++){
    codes[i] = codes[i].trim();
    if(codes[i].indexOf("{") == -1 && codes[i].indexOf("}") == -1){
      document.getElementById("res").innerHTML += "&nbsp;&nbsp;";
    }
    document.getElementById("res").innerHTML += codes[i] + "<br>";
  }
  document.getElementById("res").innerHTML += "</code></pre>";
});

</script>
</body>
</html>
